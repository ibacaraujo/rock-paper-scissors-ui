<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Rock Paper Scissors</title>
</head>
<body>

	<button id="rock">Rock</button>
	<button id="paper">Paper</button>
	<button id="scissors">Scissors</button>

	<div id="results"></div>

	<script>

		const results = document.querySelector('#results');
		let playerScore = 0;
		let computerScore = 0;
		let restart = 0;

		function computerPlay() {
			plays = ["Rock", "Paper", "Scissors"];
			play = plays[Math.floor(Math.random() * plays.length)];
			return play;
		}

		function playRound(e) {

			if (restart) {
		    	playerScore = 0;
		    	computerScore = 0;
		    	while (results.firstChild) {
		    		results.removeChild(results.firstChild);
		    	}
		    	restart = 0;
		    }

			let playerSelection = e.target.innerText;
			let computerSelection = computerPlay();
			
			const p1 = document.createElement('p');
		    const p2 = document.createElement('p');

		    if (playerSelection == "Rock" && computerSelection == "Paper"
		    	|| playerSelection == "Paper" && computerSelection == "Scissors" 
		    	|| playerSelection == "Scissors" && computerSelection == "Rock") {
		    	p1.innerHTML = "You Lose! " + computerSelection + " beats " + playerSelection + ".";
		    	computerScore = computerScore + 1;
		    	p2.innerHTML = "Player score: " + playerScore + ". Computer score: " + computerScore + ".";
		    } else if (playerSelection == "Paper" && computerSelection == "Rock"
		    	|| playerSelection == "Scissors" && computerSelection == "Paper" 
		    	|| playerSelection == "Rock" && computerSelection == "Scissors") {
		    	p1.innerHTML = "You Won! " + playerSelection + " beats " + computerSelection + ".";
		    	playerScore = playerScore + 1;
		    	p2.innerHTML = "Player score: " + playerScore + ". Computer score: " + computerScore + ".";
		    } else { 
		    	p1.innerHTML = "This is a tie! Play again!";
		    	p2.innerHTML = 'Player score: ' + playerScore + ". Computer score: " + computerScore + ".";
		    }

		    results.appendChild(p1);
		    results.appendChild(p2);

		    if (playerScore == 5) {
		    	const p = document.querySelector('p');
		    	p.innerHTML = "Player is the winner! Just click in one of the buttons to play again!";
		    	results.appendChild(p);
		    	restart = 1;
		    } 
		    
		    if (computerScore == 5) {
		    	const p = document.querySelector('p');
		    	p.innerHTML = "Computer is the winner! Just click in one of the buttons to play again!";
		    	results.appendChild(p);
		    	restart = 1
		    }

		}

		const btnRock = document.querySelector('#rock');
		const btnPaper = document.querySelector('#paper');
		const btnScissors = document.querySelector('#scissors');

		//btnRock.addEventListener('click', function(e) {
		//	console.log(e.target.innerText);
		//});

		btnRock.addEventListener('click', playRound);
		btnPaper.addEventListener('click', playRound);
		btnScissors.addEventListener('click', playRound);

		//const playerSelection = "rock";
		//const computerSelection = computerPlay();
		//console.log(playRound(playerSelection, computerSelection));
	</script>
</body>
</html>